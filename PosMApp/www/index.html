<!DOCTYPE HTML>
<html>
<head>
	<title>PosMApp</title>
	<!-- metaで文字コードを指定しないと文字化けする -->
	<meta charset="UTF-8">

	<link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.2.min.css" />
	<link rel="stylesheet" type="text/css" href="icon.css" />

	<script type="text/javascript" charset="utf-8" src="js/jquery-2.1.1.min.js">
	</script>
	<script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.4.2.min.js">
	</script>
	<script type="text/javascript" charset="utf-8" src="js/initdb.js">
	</script>
	<script type="text/javascript" charset="utf-8" src="js/postermap.js">
	</script>

	<!-- DB用ポスターデータ -->
	<script type="text/javascript" charset="utf-8" src="js/posterdata.js">
	</script>

	<script>
		$(function() {
			setDetails();

			// 詳細情報画面を表示する
			$("#detailinfobutton").on("touchstart", function(e) {
				setDetails();
				window.location.href = "#detailPage";
			});
		});

		function setDetails() {
			$("#detail-posterid").html(sessionStorage.getItem("posterid"));
			$("#detail-sessionid").html(sessionStorage.getItem("sessionid"));
			$("#detail-title").html(sessionStorage.getItem("title"));
			$("#detail-authors").html(sessionStorage.getItem("authors"));
			$("#detail-authorbelongs").html(sessionStorage.getItem("authorbelongs"));
			$("#detail-authorname").html(sessionStorage.getItem("authorname"));
			$("#detail-keywords").html(sessionStorage.getItem("keywords"));
			$("#detail-abstract").html(sessionStorage.getItem("abstract"));
		}
	</script>
</head>

<body>
	<!-- トップメニュー画面 -->
	<div data-role="page" id="topPage">
		<table align="center">
			<tr>
				<td><img id="goToMap" src="img/topmenu/map.png"></img></td>
				<td><img id="goToList" src="img/topmenu/list.png"></img></td>
			</tr>
			<tr>
				<td><img id="goToBookmark" src="img/topmenu/bookmark_gray.png"></img></td>
				<td><img id="goToInformation" src="img/topmenu/information_gray.png"></img></td>
			</tr>
		</table>
	</div>

	<!-- ポスターマップ画面 -->
	<div data-role="page" id="posterMapPage">
		<div data-role="header">
			<!-- 検索バー -->
	    	<input id="search-title" type="search" name="search"
	    	placeholder="タイトルで検索" />
		</div>
		<div style="position: relative;">
			<!-- 検索結果件数 -->
			<div id="searchResult" style="position: absolute; z-index: 100;">
			</div>
			<div id="changelabel" style="border:2px;">
				<!-- ラベル表示切替ボタン -->
				<a data-role="button" href="#changeLabelDialog"
				data-inline="true" data-rel="dialog"
				data-transition="pop">表示切替</a>
			</div>
			<div style="position: absolute;">
				<div align="center">
				<!-- ポスターマップ表示 -->
					<img src="img/postermap.png" border="0"  width="100%"
						style="position: relative; z-index: 1;"></img>
				</div>
				<!-- 基本情報パネル -->
				<div style="position: relative;">
					<div id="basicinfopanel" style="display:none;">
						<div id="basicinfo"></div>
						<!-- アイコンの切り替えはpostermap.jsで行う -->
						<img id="bookmarkbutton"></img>
						<img id="detailinfobutton" src="img/detail.png"></img>
					</div>
				</div>
			</div>

			<!-- ポスターアイコン -->
			<div id="posters" style="position: absolute;"></div>
		</div>
	</div>

	<!-- 詳細情報画面 -->
	<div data-role="page" id="detailPage">
		No. <span id="detail-posterid"></span> [<span id="detail-sessionid"></span>]
		<h1>
			<span id="detail-title"></span>
		</h1>
		<ul>
			<li>著者： <span id="detail-authors"></span></li>
			<li>所属： <span id="detail-authorbelongs"></span></li>
			<li>チーム名： <span id="detail-authorname"></span></li>
			<li>コース： <span id="detail-keywords"></span></li>
		</ul>
		<h2>概要</h2>
		<p>
			<span id="detail-abstract"></span>
		</p>
		<a data-role="button" href="#posterMapPage">戻る</a>
	</div>

	<!-- 表示切替ボタンのダイアログ -->
	<div data-role="page" id="changeLabelDialog">
		<div data-role="header">
			<h1>ラベルの表示切り替え</h1>
		</div>
		<div data-role="content">
			<a class="changelabel" id="label-id"
				href="#posterMapPage" data-role="button">ID</a>
			<a class="changelabel" id="label-sessionid"
				href="#posterMapPage" data-role="button">セッションID</a>
			<a class="changelabel" id="label-title"
				href="#posterMapPage" data-role="button">タイトル</a>
			<a class="changelabel" id="label-authorname"
				href="#posterMapPage" data-role="button">チーム名</a>
			<a class="changelabel" id="label-authorbelongs"
				href="#posterMapPage" data-role="button">大学名</a>
		</div>
	</div>
</body>
</html>
