<!DOCTYPE HTML>
<html>
<head>
	<title>PosMApp</title>
	<!-- metaで文字コードを指定しないと文字化けする -->
	<meta charset="UTF-8">

	<link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.2.min.css" />
	<link rel="stylesheet" type="text/css" href="icon.css" />

	<script type="text/javascript" charset="utf-8" src="js/jquery-2.1.1.min.js">
	</script>
	<script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.4.2.min.js">
	</script>
	<script type="text/javascript" charset="utf-8" src="js/initdb.js">
	</script>
	<script type="text/javascript" charset="utf-8" src="js/postermap.js">
	</script>

	<!-- DB用ポスターデータ -->
	<script type="text/javascript" charset="utf-8" src="js/posterdata.js">
	</script>

	<script>
		var posterid = sessionStorage.getItem("posterid");
		var sessionid = sessionStorage.getItem("sessionid");
		var title = sessionStorage.getItem("title");
		var abstract = sessionStorage.getItem("abstract");
		var authorname = sessionStorage.getItem("authorname");
		var authorbelongs = sessionStorage.getItem("authorbelongs");
		var bookmark = sessionStorage.getItem("bookmakr");
		var star = sessionStorage.getItem("star");
		var authors = sessionStorage.getItem("authors");
		var keywords = sessionStorage.getItem("keywords");

		$(function() {
			setLabels();

			// 詳細情報画面を表示する
			$("#detailinfobutton").on("touchstart", function(e) {
				setLabels();
				window.location.href = "#detailPage";
			});
		});

		function setLabels() {
			$("#label-posterid").html(sessionStorage.getItem("posterid"));
			$("#label-sessionid").html(sessionStorage.getItem("sessionid"));
			$("#label-title").html(sessionStorage.getItem("title"));
			$("#label-authors").html(sessionStorage.getItem("authors"));
			$("#label-authorbelongs").html(sessionStorage.getItem("authorbelongs"));
			$("#label-authorname").html(sessionStorage.getItem("authorname"));
			$("#label-keywords").html(sessionStorage.getItem("keywords"));
			$("#label-abstract").html(sessionStorage.getItem("abstract"));
		}
	</script>
</head>

<body>
	<!-- ポスターマップ画面 -->
	<div data-role="page" id="posterMapPage">
		<div data-role="header">
			<!-- 検索バー -->
	    	<input id="search-title" type="search" name="search"
	    	placeholder="タイトルで検索" />
		</div>
		<div style="position: relative;">
			<!-- 検索結果件数 -->
			<div id="searchResult" style="position: absolute; z-index: 100;">
			</div>
			<div id="changelabel" style="border:2px;">
				<!-- ラベル表示切替ボタン -->
				<a data-role="button" href="#changeLabelDialog"
				data-inline="true" data-rel="dialog"
				data-transition="pop">表示切替</a>
			</div>
			<div style="position: absolute;">
				<div align="center">
				<!-- ポスターマップ表示 -->
					<img src="img/postermap.png" border="0"  width="100%"
						style="position: relative; z-index: 1;"></img>
				</div>
				<!-- 基本情報パネル -->
				<div style="position: relative;">
					<div id="basicinfopanel" style="display:none;">
						<div id="basicinfo"></div>
						<!-- アイコンの切り替えはpostermap.jsで行う -->
						<img id="bookmarkbutton"></img>
						<img id="detailinfobutton" src="img/detail.png"></img>
					</div>
				</div>
			</div>

			<!-- ポスターアイコン -->
			<div id="posters" style="position: absolute;"></div>
		</div>
	</div>

	<!-- 詳細情報画面 -->
	<div data-role="page" id="detailPage">
		No. <span id="label-posterid"></span> [<span id="label-sessionid"></span>]
		<h1>
			<span id="label-title"></span>
		</h1>
		<ul>
			<li>著者： <span id="label-authors"></span></li>
			<li>所属： <span id="label-authorbelongs"></span></li>
			<li>チーム名： <span id="label-authorname"></span></li>
			<li>コース： <span id="label-keywords"></span></li>
		</ul>
		<h2>概要</h2>
		<p>
			<span id="label-abstract"></span>
		</p>
		<a data-role="button" href="#posterMapPage">戻る</a>
	</div>

	<!-- 表示切替ボタンのダイアログ -->
	<div data-role="page" id="changeLabelDialog">
		<div data-role="header">
			<h1>ラベルの表示切り替え</h1>
		</div>
		<div data-role="content">
			<a class="changelabel" id="label-id"
				href="#posterMapPage" data-role="button">ID</a>
			<a class="changelabel" id="label-sessionid"
				href="#posterMapPage" data-role="button">セッションID</a>
			<a class="changelabel" id="label-title"
				href="#posterMapPage" data-role="button">タイトル</a>
			<a class="changelabel" id="label-authorname"
				href="#posterMapPage" data-role="button">チーム名</a>
			<a class="changelabel" id="label-authorbelongs"
				href="#posterMapPage" data-role="button">大学名</a>
		</div>
	</div>
</body>
</html>
