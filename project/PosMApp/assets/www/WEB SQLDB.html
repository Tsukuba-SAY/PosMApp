<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Web SQL Database Sample</title>
<style>
#message { margin:1em; width:500px; border:1px solid gray; padding:1em; }
</style>
<script>
function print(msg) {
    document.getElementById("message").innerHTML += msg + "<br>";
}
function test() {
    var id = document.getElementById("id").value;
    var context = document.getElementById("context").value;
    alert("id:"+id+"  context:"+context);
    var db = openDatabase("testDB", "", "Test Database", 1000);
    db.transaction(
        function(tr) {
	    tr.executeSql("CREATE TABLE IF NOT EXISTS test ( id, name )", [],
                function() { print("CREATE TABLE SUCCESS"); },
                function() { print("CREATE TABLE ERROR"); }
            );
            tr.executeSql("INSERT INTO test VALUES ( ?, ? )", [ id, context ],
                function() { print("INSERT DATA YAMADA SUCCESS"); },
                function() { print("INSERT DATA YAMADA ERROR"); }
            );
            tr.executeSql("SELECT * FROM test", [],
                function(rt, rs) {
                    print("SELECT: SUCCESS");
                    for (var i = 0; i < rs.rows.length; i++) {
                        var row = rs.rows.item(i);
                        print(row.id + " / " + row.name);
                    }
                },
                function() { print("SELECT: ERROR"); }
            );
            print("CALLBACK END");
        },
        function(err) { print("TRANSACTION ERROR"); },
        function(   ) { print("TRANSACTION SUCCESS"); }
    );
    print("FUNCSTION END");
}
</script>
</head>
<body>
id:<input type="text" id="id"></input>
context:<input type="text" id="context"></input>
<button onclick="test()">Insert</button>
<div id="message"></div>
</body>
</html>
